import tkinter as tk  # –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫—É –¥–ª—è –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
import random         # –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫—É –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–ª—É—á–∞–π–Ω—ã—Ö —á–∏—Å–µ–ª

# üéÆ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–≥—Ä—ã
WIDTH = 400         # –®–∏—Ä–∏–Ω–∞ –∏–≥—Ä–æ–≤–æ–≥–æ –æ–∫–Ω–∞ (–≤ –ø–∏–∫—Å–µ–ª—è—Ö)
HEIGHT = 400        # –í—ã—Å–æ—Ç–∞ –∏–≥—Ä–æ–≤–æ–≥–æ –æ–∫–Ω–∞ (–≤ –ø–∏–∫—Å–µ–ª—è—Ö)
DIRECTIONS = ["Up", "Down", "Left", "Right"]  # –í–æ–∑–º–æ–∂–Ω—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–≤–∏–∂–µ–Ω–∏—è –∑–º–µ–π–∫–∏
CELL_SIZE = 10      # –†–∞–∑–º–µ—Ä –æ–¥–Ω–æ–π –∫–ª–µ—Ç–∫–∏ (–¥–ª—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ –µ–¥—ã –∏ —Ç–µ–ª–∞ –∑–º–µ–π–∫–∏)
DELAY = 100         # –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É —Ö–æ–¥–∞–º–∏ (—Å–∫–æ—Ä–æ—Å—Ç—å –∏–≥—Ä—ã –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö)

# üñ•Ô∏è –°–æ–∑–¥–∞–Ω–∏–µ –≥–ª–∞–≤–Ω–æ–≥–æ –æ–∫–Ω–∞ –∏–≥—Ä—ã
root = tk.Tk()                    # –°–æ–∑–¥–∞—ë–º –≥–ª–∞–≤–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
root.title("–ó–º–µ–π–∫–∞ | –°—á—ë—Ç: 0")    # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ –æ–∫–Ω–∞
root.resizable(False, False)      # –ó–∞–ø—Ä–µ—â–∞–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–æ–≤ –æ–∫–Ω–∞

# üé® –°–æ–∑–¥–∞–Ω–∏–µ —Ö–æ–ª—Å—Ç–∞ (–∏–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ)
canvas = tk.Canvas(
    root,                          # –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–µ –æ–∫–Ω–æ
    width=WIDTH,                   # –®–∏—Ä–∏–Ω–∞ —Ö–æ–ª—Å—Ç–∞
    height=HEIGHT,                 # –í—ã—Å–æ—Ç–∞ —Ö–æ–ª—Å—Ç–∞
    bg="black",                    # –¶–≤–µ—Ç —Ñ–æ–Ω–∞ ‚Äî —á—ë—Ä–Ω—ã–π
    highlightthickness=0           # –£–±–∏—Ä–∞–µ–º —Ä–∞–º–∫—É –≤–æ–∫—Ä—É–≥ —Ö–æ–ª—Å—Ç–∞
)
canvas.pack()  # –†–∞–∑–º–µ—â–∞–µ–º —Ö–æ–ª—Å—Ç –≤–Ω—É—Ç—Ä–∏ –æ–∫–Ω–∞

# üêç –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è —Å—Ç–∞—Ä—Ç–æ–≤–æ–π –∑–º–µ–π–∫–∏
def create_snake():
    # –û–ø—Ä–µ–¥–µ–ª—è–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≥–æ–ª–æ–≤—ã –∑–º–µ–π–∫–∏ (–≤ –∫–ª–µ—Ç–∫–∞—Ö)
    max_x = (WIDTH // CELL_SIZE) - 3
    max_y = (HEIGHT // CELL_SIZE) - 1

    # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–ª—É—á–∞–π–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≥–æ–ª–æ–≤—ã (—É–º–Ω–æ–∂–∞–µ–º –Ω–∞ CELL_SIZE –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞ –≤ –ø–∏–∫—Å–µ–ª–∏)
    x = random.randint(0, max_x) * CELL_SIZE
    y = random.randint(0, max_y) * CELL_SIZE

    # –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Å–ø–∏—Å–æ–∫ –∏–∑ —Ç—Ä—ë—Ö —Å–µ–≥–º–µ–Ω—Ç–æ–≤ –∑–º–µ–π–∫–∏, –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–π –≤–ø—Ä–∞–≤–æ
    return [(x, y), (x - CELL_SIZE, y), (x - 2 * CELL_SIZE, y)]

# üîÑ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞—á–∞–ª—å–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏–≥—Ä—ã
snake = create_snake()     # –°–æ–∑–¥–∞—ë–º –Ω–∞—á–∞–ª—å–Ω—É—é –∑–º–µ–π–∫—É
direction = "Right"        # –ù–∞—á–∞–ª—å–Ω–æ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–≤–∏–∂–µ–Ω–∏—è
score = 0                  # –ù–∞—á–∞–ª—å–Ω—ã–π —Å—á—ë—Ç
game_over = False          # –°—Ç–∞—Ç—É—Å –∏–≥—Ä—ã ‚Äî –Ω–µ –æ–∫–æ–Ω—á–µ–Ω–∞

# üçé –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –µ–¥—ã
def create_food():
    while True:
        # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–ª—É—á–∞–π–Ω—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –µ–¥—ã
        x = random.randint(0, (WIDTH - CELL_SIZE) // CELL_SIZE) * CELL_SIZE
        y = random.randint(0, (HEIGHT - CELL_SIZE) // CELL_SIZE) * CELL_SIZE
        if (x, y) not in snake:  # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ–±—ã –µ–¥–∞ –Ω–µ –±—ã–ª–∞ –≤–Ω—É—Ç—Ä–∏ –∑–º–µ–π–∫–∏
            return (x, y)        # –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –µ–¥—ã

food = create_food()  # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –Ω–∞—á–∞–ª—å–Ω—É—é –ø–æ–∑–∏—Ü–∏—é –µ–¥—ã

# üé® –§—É–Ω–∫—Ü–∏—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ –µ–¥—ã
def draw_food():
    canvas.create_rectangle(
        food[0], food[1],             # –í–µ—Ä—Ö–Ω–∏–π –ª–µ–≤—ã–π —É–≥–æ–ª –µ–¥—ã
        food[0] + CELL_SIZE,          # –ü—Ä–∞–≤—ã–π –Ω–∏–∂–Ω–∏–π —É–≥–æ–ª –ø–æ x
        food[1] + CELL_SIZE,          # –ü—Ä–∞–≤—ã–π –Ω–∏–∂–Ω–∏–π —É–≥–æ–ª –ø–æ y
        fill="red"                    # –¶–≤–µ—Ç –µ–¥—ã ‚Äî –∫—Ä–∞—Å–Ω—ã–π
    )

# üêç –§—É–Ω–∫—Ü–∏—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ –∑–º–µ–π–∫–∏
def draw_snake():
    for segment in snake:  # –ü—Ä–æ—Ö–æ–¥–∏–º –ø–æ –≤—Å–µ–º —Å–µ–≥–º–µ–Ω—Ç–∞–º –∑–º–µ–π–∫–∏
        canvas.create_rectangle(
            segment[0], segment[1],         # –í–µ—Ä—Ö–Ω–∏–π –ª–µ–≤—ã–π —É–≥–æ–ª —Å–µ–≥–º–µ–Ω—Ç–∞
            segment[0] + CELL_SIZE,        # –ü—Ä–∞–≤—ã–π –Ω–∏–∂–Ω–∏–π —É–≥–æ–ª –ø–æ x
            segment[1] + CELL_SIZE,        # –ü—Ä–∞–≤—ã–π –Ω–∏–∂–Ω–∏–π —É–≥–æ–ª –ø–æ y
            fill="green",                 # –¶–≤–µ—Ç —Ç–µ–ª–∞ –∑–º–µ–π–∫–∏ ‚Äî –∑–µ–ª—ë–Ω—ã–π
            outline="darkgreen"           # –û–±–≤–æ–¥–∫–∞ ‚Äî —Ç—ë–º–Ω–æ-–∑–µ–ª—ë–Ω–∞—è
        )

# üîÑ –§—É–Ω–∫—Ü–∏—è –¥–≤–∏–∂–µ–Ω–∏—è –∑–º–µ–π–∫–∏
def move_snake():
    head_x, head_y = snake[0]  # –ü–æ–ª—É—á–∞–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≥–æ–ª–æ–≤—ã

    # –û–ø—Ä–µ–¥–µ–ª—è–µ–º –Ω–æ–≤—É—é –≥–æ–ª–æ–≤—É –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è
    if direction == "Up":
        new_head = (head_x, head_y - CELL_SIZE)
    elif direction == "Down":
        new_head = (head_x, head_y + CELL_SIZE)
    elif direction == "Left":
        new_head = (head_x - CELL_SIZE, head_y)
    elif direction == "Right":
        new_head = (head_x + CELL_SIZE, head_y)

    snake.insert(0, new_head)  # –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—É—é –≥–æ–ª–æ–≤—É –≤ –Ω–∞—á–∞–ª–æ —Å–ø–∏—Å–∫–∞

    # –ï—Å–ª–∏ –µ–¥–∞ –Ω–µ —Å—ä–µ–¥–µ–Ω–∞, —É–¥–∞–ª—è–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–π —Å–µ–≥–º–µ–Ω—Ç (—Ö–≤–æ—Å—Ç)
    if not check_food_collision():
        snake.pop()

# üçΩÔ∏è –ü—Ä–æ–≤–µ—Ä–∫–∞: —Å—ä–µ–¥–µ–Ω–∞ –ª–∏ –µ–¥–∞
def check_food_collision():
    global food, score  # –û–±—ä—è–≤–ª—è–µ–º –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
    if snake[0] == food:  # –ï—Å–ª–∏ –≥–æ–ª–æ–≤–∞ –∑–º–µ–π–∫–∏ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –µ–¥–æ–π
        score += 1        # –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—á—ë—Ç
        food = create_food()  # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –Ω–æ–≤—É—é –µ–¥—É
        return True       # –°–æ–æ–±—â–∞–µ–º, —á—Ç–æ –µ–¥–∞ —Å—ä–µ–¥–µ–Ω–∞
    return False          # –ï–¥–∞ –Ω–µ —Å—ä–µ–¥–µ–Ω–∞

# üß± –ü—Ä–æ–≤–µ—Ä–∫–∞: —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ —Å–æ —Å—Ç–µ–Ω–∞–º–∏
def check_wall_collision():
    head_x, head_y = snake[0]  # –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≥–æ–ª–æ–≤—ã
    return (
        head_x < 0 or head_x >= WIDTH or  # –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã—Ö–æ–¥–∞ –∑–∞ –≥—Ä–∞–Ω–∏—Ü—ã –ø–æ x
        head_y < 0 or head_y >= HEIGHT    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã—Ö–æ–¥–∞ –∑–∞ –≥—Ä–∞–Ω–∏—Ü—ã –ø–æ y
    )

# üêç –ü—Ä–æ–≤–µ—Ä–∫–∞: —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ —Å —Å–∞–º–æ–π —Å–æ–±–æ–π
def check_self_collision():
    return snake[0] in snake[1:]  # –ï—Å–ª–∏ –≥–æ–ª–æ–≤–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ç–µ–ª–µ ‚Äî —ç—Ç–æ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ

# ‚ùå –§—É–Ω–∫—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∏–≥—Ä—ã
def end_game():
    global game_over  # –û–±—ä—è–≤–ª—è–µ–º –≥–ª–æ–±–∞–ª—å–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é
    game_over = True  # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ñ–ª–∞–≥ –æ–∫–æ–Ω—á–∞–Ω–∏—è –∏–≥—Ä—ã
    canvas.create_text(
        WIDTH // 2, HEIGHT // 2,  # –¶–µ–Ω—Ç—Ä —ç–∫—Ä–∞–Ω–∞
        text=f"–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞! –°—á—ë—Ç: {score}",  # –¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
        fill="white",              # –¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞
        font=("Arial", 24)          # –®—Ä–∏—Ñ—Ç –∏ —Ä–∞–∑–º–µ—Ä —Ç–µ–∫—Å—Ç–∞
    )

# üîÅ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞ –æ–∫–Ω–∞
def update_title():
    root.title(f"–ó–º–µ–π–∫–∞ | –°—á—ë—Ç: {score}")  # –û–±–Ω–æ–≤–ª—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ –æ–∫–Ω–∞ —Å —Ç–µ–∫—É—â–∏–º —Å—á—ë—Ç–æ–º

# üîÑ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∏–≥—Ä—ã
def restart_game():
    global snake, direction, food, score, game_over

    snake = create_snake()      # –°–æ–∑–¥–∞—ë–º –Ω–æ–≤—É—é –∑–º–µ–π–∫—É
    direction = "Right"         # –ù–∞—á–∞–ª—å–Ω–æ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
    food = create_food()        # –ù–æ–≤–∞—è –µ–¥–∞
    score = 0                   # –°–±—Ä–æ—Å —Å—á—ë—Ç–∞
    game_over = False           # –ò–≥—Ä–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è

    canvas.delete("all")        # –û—á–∏—â–∞–µ–º —Ö–æ–ª—Å—Ç
    draw_food()                 # –†–∏—Å—É–µ–º –Ω–æ–≤—É—é –µ–¥—É
    draw_snake()                # –†–∏—Å—É–µ–º –Ω–æ–≤—É—é –∑–º–µ–π–∫—É
    update_title()              # –û–±–Ω–æ–≤–ª—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫
    root.after(DELAY, game_loop)  # –ó–∞–ø—É—Å–∫–∞–µ–º –Ω–æ–≤—ã–π –∏–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª

# ‚å®Ô∏è –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏–π –∫–ª–∞–≤–∏—à
def on_key_press(event):
    global direction, game_over

    key = event.keysym  # –ü–æ–ª—É—á–∞–µ–º –Ω–∞–∑–≤–∞–Ω–∏–µ –Ω–∞–∂–∞—Ç–æ–π –∫–ª–∞–≤–∏—à–∏

    # –ú–µ–Ω—è–µ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ, –µ—Å–ª–∏ –∏–≥—Ä–∞ –Ω–µ –æ–∫–æ–Ω—á–µ–Ω–∞ –∏ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ä–∞–∑–≤–æ—Ä–æ—Ç –Ω–∞ 180¬∞
    if key in DIRECTIONS and not game_over:
        if (key == "Up" and direction != "Down" or
            key == "Down" and direction != "Up" or
            key == "Left" and direction != "Right" or
            key == "Right" and direction != "Left"):
            direction = key  # –û–±–Ω–æ–≤–ª—è–µ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
    elif key == "space" and game_over:
        restart_game()  # –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º –∏–≥—Ä—É, –µ—Å–ª–∏ –æ–Ω–∞ –æ–∫–æ–Ω—á–µ–Ω–∞

# üîÑ –û—Å–Ω–æ–≤–Ω–æ–π –∏–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª
def game_loop():
    global snake, food, score

    if game_over:
        return  # –ï—Å–ª–∏ –∏–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞ ‚Äî –≤—ã—Ö–æ–¥–∏–º

    move_snake()  # –î–≤–∏–≥–∞–µ–º –∑–º–µ–π–∫—É

    # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏—è
    if check_wall_collision() or check_self_collision():
        end_game()  # –ï—Å–ª–∏ –µ—Å—Ç—å ‚Äî –∑–∞–≤–µ—Ä—à–∞–µ–º –∏–≥—Ä—É
        return

    canvas.delete("all")   # –û—á–∏—â–∞–µ–º —Ö–æ–ª—Å—Ç –ø–µ—Ä–µ–¥ —Ä–∏—Å–æ–≤–∞–Ω–∏–µ–º –Ω–æ–≤–æ–≥–æ –∫–∞–¥—Ä–∞
    draw_food()            # –†–∏—Å—É–µ–º –µ–¥—É
    draw_snake()           # –†–∏—Å—É–µ–º –∑–º–µ–π–∫—É
    update_title()         # –û–±–Ω–æ–≤–ª—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫ –æ–∫–Ω–∞
    root.after(DELAY, game_loop)  # –ó–∞–ø—É—Å–∫–∞–µ–º —Å–ª–µ–¥—É—é—â–∏–π –∫–∞–¥—Ä —á–µ—Ä–µ–∑ DELAY –º—Å

# üöÄ –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã
root.bind("<KeyPress>", on_key_press)  # –ü—Ä–∏–≤—è–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é –∫ —Å–æ–±—ã—Ç–∏—é –Ω–∞–∂–∞—Ç–∏—è –∫–ª–∞–≤–∏—à
draw_food()    # –†–∏—Å—É–µ–º –Ω–∞—á–∞–ª—å–Ω—É—é –µ–¥—É
draw_snake()   # –†–∏—Å—É–µ–º –Ω–∞—á–∞–ª—å–Ω—É—é –∑–º–µ–π–∫—É
root.after(DELAY, game_loop)  # –ó–∞–ø—É—Å–∫–∞–µ–º –ø–µ—Ä–≤—ã–π –∫–∞–¥—Ä –∏–≥—Ä—ã
root.mainloop()  # –ó–∞–ø—É—Å–∫–∞–µ–º –≥–ª–∞–≤–Ω—ã–π —Ü–∏–∫–ª –ø—Ä–æ–≥—Ä–∞–º–º—ã
